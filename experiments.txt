python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding sinusoidal --ckpt result_xsmall_noaug_sinusoidal1.pt > result_xsmall_noaug_sinusoidal1.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding sinusoidal --ckpt result_xsmall_noaug_sinusoidal2.pt > result_xsmall_noaug_sinusoidal2.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding sinusoidal --ckpt result_xsmall_noaug_sinusoidal3.pt > result_xsmall_noaug_sinusoidal3.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding sinusoidal --ckpt result_xsmall_noaug_sinusoidal4.pt > result_xsmall_noaug_sinusoidal4.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding sinusoidal --ckpt result_xsmall_noaug_sinusoidal5.pt > result_xsmall_noaug_sinusoidal5.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding learned --ckpt result_xsmall_noaug_learned1.pt  > result_xsmall_noaug_learned1.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding learned --ckpt result_xsmall_noaug_learned2.pt  > result_xsmall_noaug_learned2.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding learned --ckpt result_xsmall_noaug_learned3.pt  > result_xsmall_noaug_learned3.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding learned --ckpt result_xsmall_noaug_learned4.pt  > result_xsmall_noaug_learned4.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding learned --ckpt result_xsmall_noaug_learned5.pt  > result_xsmall_noaug_learned5.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding none --ckpt result_xsmall_none1.pt  > result_xsmall_none1.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding none --ckpt result_xsmall_none2.pt  > result_xsmall_none2.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding none --ckpt result_xsmall_none3.pt  > result_xsmall_none3.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding none --ckpt result_xsmall_none4.pt  > result_xsmall_none4.txt
python train.py --model-size xsmall --position-start-augmentation False --absolute-position-embedding none --ckpt result_xsmall_none5.pt  > result_xsmall_none5.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding sinusoidal --ckpt result_xsmall_aug_sinusoidal1.pt  > result_xsmall_aug_sinusoidal1.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding sinusoidal --ckpt result_xsmall_aug_sinusoidal2.pt  > result_xsmall_aug_sinusoidal2.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding sinusoidal --ckpt result_xsmall_aug_sinusoidal3.pt  > result_xsmall_aug_sinusoidal3.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding sinusoidal --ckpt result_xsmall_aug_sinusoidal4.pt  > result_xsmall_aug_sinusoidal4.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding sinusoidal --ckpt result_xsmall_aug_sinusoidal5.pt  > result_xsmall_aug_sinusoidal5.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding learned --ckpt result_xsmall_aug_learned1.pt > result_xsmall_aug_learned1.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding learned --ckpt result_xsmall_aug_learned2.pt > result_xsmall_aug_learned2.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding learned --ckpt result_xsmall_aug_learned3.pt > result_xsmall_aug_learned3.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding learned --ckpt result_xsmall_aug_learned4.pt > result_xsmall_aug_learned4.txt
python train.py --model-size xsmall --position-start-augmentation True --absolute-position-embedding learned --ckpt result_xsmall_aug_learned5.pt > result_xsmall_aug_learned5.txt

# after having run the previous experiments, takeaways:
avg avg perplexity for length 128 across runs:
none:
137.06
learned:
137.65
sinusoidal:
138.04

overall:

differences minimal at this model size / training steps / hyperparams

none and aug sinusoidal are potentially the best

but none has an advantage of being much simpler (do nothing)

extra experiments:
xsmall noaug vs aug learned, 50k steps (x5 training steps)

noaug was ~2.9% better than aug after 50k steps (aug len 128 76.065 avg avg ppl vs noaug len 128 73.881 avg avg ppl)

noaug was significantly better at long context (1024 len) (266.99 vs 298.29 avg avg ppl)
but prev experiments showed long context results MUCH more noisy than training context results

next set of tests: relative pos embeddings with none for absolute embeddings
additionally, modifying test lengths, since these methods all generalize much better

python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding linear_cpb --ckpt result_xsmall_none_linear_cpb1.pt > result_xsmall_none_linear_cpb1.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding linear_cpb --ckpt result_xsmall_none_linear_cpb2.pt > result_xsmall_none_linear_cpb2.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding linear_cpb --ckpt result_xsmall_none_linear_cpb3.pt > result_xsmall_none_linear_cpb3.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding linear_cpb --ckpt result_xsmall_none_linear_cpb4.pt > result_xsmall_none_linear_cpb4.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding linear_cpb --ckpt result_xsmall_none_linear_cpb5.pt > result_xsmall_none_linear_cpb5.txt

python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding log_cpb --ckpt result_xsmall_none_log_cpb1.pt > result_xsmall_none_log_cpb1.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding log_cpb --ckpt result_xsmall_none_log_cpb2.pt > result_xsmall_none_log_cpb2.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding log_cpb --ckpt result_xsmall_none_log_cpb3.pt > result_xsmall_none_log_cpb3.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding log_cpb --ckpt result_xsmall_none_log_cpb4.pt > result_xsmall_none_log_cpb4.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding log_cpb --ckpt result_xsmall_none_log_cpb5.pt > result_xsmall_none_log_cpb5.txt

python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding fourier_cpb --ckpt result_xsmall_none_fourier_cpb1.pt > result_xsmall_none_fourier_cpb1.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding fourier_cpb --ckpt result_xsmall_none_fourier_cpb2.pt > result_xsmall_none_fourier_cpb2.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding fourier_cpb --ckpt result_xsmall_none_fourier_cpb3.pt > result_xsmall_none_fourier_cpb3.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding fourier_cpb --ckpt result_xsmall_none_fourier_cpb4.pt > result_xsmall_none_fourier_cpb4.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding fourier_cpb --ckpt result_xsmall_none_fourier_cpb5.pt > result_xsmall_none_fourier_cpb5.txt

python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding alibi --ckpt result_xsmall_none_alibi1.pt > result_xsmall_none_alibi1.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding alibi --ckpt result_xsmall_none_alibi2.pt > result_xsmall_none_alibi2.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding alibi --ckpt result_xsmall_none_alibi3.pt > result_xsmall_none_alibi3.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding alibi --ckpt result_xsmall_none_alibi4.pt > result_xsmall_none_alibi4.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding alibi --ckpt result_xsmall_none_alibi5.pt > result_xsmall_none_alibi5.txt

python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding rotary --ckpt result_xsmall_none_rotary1.pt > result_xsmall_none_rotary1.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding rotary --ckpt result_xsmall_none_rotary2.pt > result_xsmall_none_rotary2.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding rotary --ckpt result_xsmall_none_rotary3.pt > result_xsmall_none_rotary3.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding rotary --ckpt result_xsmall_none_rotary4.pt > result_xsmall_none_rotary4.txt
python train.py --model-size xsmall --absolute-position-embedding none --relative-position-embedding rotary --ckpt result_xsmall_none_rotary5.pt > result_xsmall_none_rotary5.txt

avg avg ppl for length 2048 across 5 runs
linear_cpb:     116.56259 +- 0.93250
log_cpb:        117.80258 +- 1.20369
fourier_cpb:    132.80323 +- 2.95787
alibi:          119.69891 +- 0.79353
rotary:


avg avg ppl for length 128 across 5 runs
linear_cpb:     119.99844 +- 0.73475
log_cpb:        120.72210 +- 1.13642
fourier_cpb:    119.18559 +- 0.98430
alibi:          123.93904 +- 0.66219
rotary:

extra notes:
linear_cpb advantage over log_cpb actually increases from length 128 to 2048 (~.72 lower ppl to ~1.24 lower ppl)
linear_cpb seems to have lower stdev than the other cpb methods (more consistent)
at training length:
    fourier_cpb is better than log_cpb
    linear_cpb is somewhere between, stdev too large to know
at length 2048
    fourier_cpb is definitely much worse than both log and linear cpb
    linear_cpb is probably better than log_cpb
